(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(4765)}])},4765:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return eI}});var n,s,i,o,r,l,c,d,u,m,g,h,x=a(5893),p=a(7294),f=a(9008),y=a.n(f),b=a(7632);(n=c||(c={})).DATING="Dating",n.WORK="Work Environment",n.SOCIAL_GATHERING="Social Gathering (e.g., party, networking event)",n.FAMILY="Family Interaction",n.CUSTOMER_SERVICE="Customer Service Scenario",n.NEGOTIATION="Negotiation or Debate",(s=d||(d={})).FRIENDLY_SUPPORTIVE="Friendly & Supportive",s.RESERVED_OBSERVANT="Reserved & Observant",s.ASSERTIVE_DIRECT="Assertive & Direct",s.SARCASTIC_WITTY="Sarcastic & Witty",s.ANALYTICAL_CURIOUS="Analytical & Curious",s.CHALLENGING_SKEPTICAL="Challenging & Skeptical",s.ENERGETIC_ENTHUSIASTIC="Energetic & Enthusiastic",(i=u||(u={})).AI_IS_AUTHORITY="AI is Authority (e.g., boss, interviewer, expert)",i.USER_IS_AUTHORITY="User is Authority (e.g., you're the boss, interviewer)",i.PEERS_EQUAL_FOOTING="Peers / Equal Footing",i.USER_SEEKS_FAVOR="User Seeks Favor (e.g., asking for help, making a request)",i.AI_SEEKS_FAVOR="AI Seeks Favor (e.g., AI needs your help or input)",(o=m||(m={})).MALE="Male",o.FEMALE="Female",o.NON_BINARY="Non-binary",o.PREFER_NOT_TO_SPECIFY="Prefer Not to Specify / Neutral",(r=g||(g={})).NOT_SPECIFIED="Not Specified / Auto",r.TEENAGER="Teenager (13-17)",r.YOUNG_ADULT="Young Adult (18-29)",r.ADULT="Adult (30-55)",r.SENIOR="Senior (55+)",(l=h||(h={})).HERO="hero",l.INSTRUCTIONS="instructions",l.SETUP="setup",l.INTERACTION="interaction",l.ANALYSIS="analysis";let v=()=>(0,x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),w=()=>(0,x.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[(0,x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),(0,x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 10a.5.5 0 01.5-.5h5a.5.5 0 01.5.5v4a.5.5 0 01-.5.5h-5a.5.5 0 01-.5-.5v-4z"})]}),j=()=>(0,x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),N=()=>(0,x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),k=()=>(0,x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.79 4 4s-1.79 4-4 4c-1.742 0-3.223-.835-3.772-2M12 18v.01"})}),A=()=>(0,x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,x.jsx)("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),I=()=>(0,x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,x.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})}),S=()=>(0,x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,x.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),E=()=>(0,x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),T=()=>(0,x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})}),C=()=>(0,x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 15l7-7 7 7"})}),L=()=>(0,x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),D=()=>(0,x.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[(0,x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.625 9.75a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H8.25m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H12m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0h-.375M21 12c0 4.556-3.862 8.25-8.625 8.25S3.75 16.556 3.75 12c0-4.556 3.862-8.25 8.625-8.25S21 7.444 21 12zM12 12.75c.621 0 1.125-.504 1.125-1.125V11.25c0-.621-.504-1.125-1.125-1.125S10.875 10.629 10.875 11.25v.375c0 .621.504 1.125 1.125 1.125z"}),(0,x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a8.25 8.25 0 005.474-1.993C17.065 18.666 16.5 18 15.75 18c-.75 0-1.125.075-1.5.216A4.47 4.47 0 0112 18.375c-.655 0-1.28.126-1.875.375-.375-.141-.75-.216-1.5-.216-.75 0-1.315.666-1.724 1.007A8.25 8.25 0 0012 21z"})]}),_=()=>(0,x.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[(0,x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-.001.026-.002.052-.002.078 0 .026.001.052.002.078-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7A19.953 19.953 0 012.458 12z"})]}),M=()=>(0,x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a19.953 19.953 0 013.116-4.991m13.257 4.991a19.953 19.953 0 00-3.116-4.991m-10.142 9.982A10.05 10.05 0 0112 19c1.905 0 3.71-.476 5.375-1.35M2.458 12C3.732 7.943 7.523 5 12 5c1.613 0 3.14.333 4.543.937m7.101 2.525A10.03 10.03 0 0112 19c-4.478 0-8.268-2.943-9.543-7M15 12a3 3 0 11-6 0 3 3 0 016 0z"})}),O=()=>(0,x.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[(0,x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 17l6-6 4 4 8-8"}),(0,x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 7h4v4"})]}),B=e=>{let{className:t="",iconFill:a="#0EA5E9",textFill:n="#F3F4F6",smileFill:s="#FFFFFF",style:i}=e,o="\n    M ".concat(6,",0\n    L ").concat(24,",0\n    A ").concat(6,",").concat(6," 0 0 1 ").concat(30,",").concat(6,"\n    L ").concat(30,",").concat(22,"\n    A ").concat(6,",").concat(6," 0 0 1 ").concat(24,",").concat(28,"\n    L ").concat(22.5,",").concat(28,"\n    Q ").concat(21.36,",").concat(29.5," ").concat(19.65,",").concat(31,"\n    Q ").concat(15.059999999999999,",").concat(29.5," ").concat(12,",").concat(28,"\n    L ").concat(6,",").concat(28,"\n    A ").concat(6,",").concat(6," 0 0 1 0,").concat(22,"\n    L 0,").concat(6,"\n    A ").concat(6,",").concat(6," 0 0 1 ").concat(6,",0\n    Z\n  "),r="M ".concat(8.4,",").concat(18.2," Q ").concat(15,",").concat(22.4," ").concat(21.599999999999998,",").concat(18.2);return(0,x.jsxs)("svg",{viewBox:"0 0 ".concat(112," ").concat(33),xmlns:"http://www.w3.org/2000/svg",className:t,style:i,"aria-label":"SosheIQ Logo",preserveAspectRatio:"xMidYMid meet",children:[(0,x.jsxs)("g",{children:[(0,x.jsx)("path",{d:o,fill:a}),(0,x.jsx)("circle",{cx:9.9,cy:11.76,r:2.125,fill:s}),(0,x.jsx)("circle",{cx:20.1,cy:11.76,r:2.125,fill:s}),(0,x.jsx)("path",{d:r,stroke:s,strokeWidth:"2",fill:"none",strokeLinecap:"round"})]}),(0,x.jsxs)("text",{x:37,y:16,fontFamily:"Arial, Helvetica, sans-serif",fontSize:17.709999999999997,fontWeight:"bold",dominantBaseline:"middle",children:[(0,x.jsx)("tspan",{fill:n,children:"Sosh"}),(0,x.jsx)("tspan",{fill:n,children:"e"}),(0,x.jsx)("tspan",{fill:a,children:"IQ"})]})]})},R=e=>{let{onNavigate:t}=e;return(0,x.jsxs)("div",{className:"flex flex-col items-center justify-center text-center w-full max-w-3xl p-6 md:p-10",children:[(0,x.jsx)(B,{className:"h-20 md:h-28 w-auto mb-8 opacity-0 animate-[fadeInSlideUp_0.7s_ease-out_forwards]",style:{animationDelay:"0.1s"}}),(0,x.jsx)("p",{className:"text-xl md:text-2xl text-gray-300 mb-12 opacity-0 animate-[fadeInSlideUp_0.7s_ease-out_forwards]",style:{animationDelay:"0.3s"},children:"Your AI-powered coach for mastering social interactions."}),(0,x.jsxs)("div",{className:"space-y-4 md:space-y-0 md:space-x-6 flex flex-col md:flex-row",children:[(0,x.jsxs)("button",{onClick:()=>t(h.INSTRUCTIONS),className:"px-8 py-4 bg-sky-600 hover:bg-sky-500 text-white font-semibold rounded-lg text-lg shadow-lg  transition-all duration-200 ease-in-out transform hover:scale-105 focus:outline-none  focus:ring-4 focus:ring-sky-400 focus:ring-opacity-50 opacity-0 animate-[heroButtonAppear_0.5s_ease-out_forwards] flex items-center justify-center space-x-2",style:{animationDelay:"0.6s"},"aria-label":"View Instructions",children:[(0,x.jsx)(S,{}),(0,x.jsx)("span",{children:"View Instructions"})]}),(0,x.jsxs)("button",{onClick:()=>t(h.SETUP),className:"px-8 py-4 bg-green-600 hover:bg-green-500 text-white font-semibold rounded-lg text-lg shadow-lg  transition-all duration-200 ease-in-out transform hover:scale-105 focus:outline-none  focus:ring-4 focus:ring-green-400 focus:ring-opacity-50 opacity-0 animate-[heroButtonAppear_0.5s_ease-out_forwards] flex items-center justify-center space-x-2",style:{animationDelay:"0.8s"},"aria-label":"Start Interaction",children:[(0,x.jsx)(I,{}),(0,x.jsx)("span",{children:"Start Interaction"})]})]})]})},P=e=>{let{onNavigate:t}=e;return(0,x.jsxs)("div",{className:"w-full max-w-3xl p-6 md:p-10 bg-slate-800 rounded-xl shadow-2xl space-y-6 text-gray-300",children:[(0,x.jsx)("h1",{className:"text-4xl md:text-5xl font-bold text-center text-sky-400 mb-8 drop-shadow-md",children:"How to Use SosheIQ"}),(0,x.jsxs)("section",{className:"space-y-3",children:[(0,x.jsx)("h2",{className:"text-2xl font-semibold text-teal-400",children:"Welcome!"}),(0,x.jsx)("p",{children:"SosheIQ is designed to help you practice and improve your social interaction skills in various scenarios. You'll chat with an AI that adopts different personalities and responds to how you engage."})]}),(0,x.jsxs)("section",{className:"space-y-3",children:[(0,x.jsx)("h2",{className:"text-2xl font-semibold text-teal-400",children:"1. Setting Up Your Scenario"}),(0,x.jsxs)("ul",{className:"list-disc list-inside space-y-2 pl-4",children:[(0,x.jsxs)("li",{children:[(0,x.jsx)("strong",{children:"AI Gender & Name:"})," Choose the AI's gender. You can then type a custom name or have one suggested/auto-generated."]}),(0,x.jsxs)("li",{children:[(0,x.jsx)("strong",{children:"Social Environment:"})," Select the context of your interaction (e.g., Dating, Work)."]}),(0,x.jsxs)("li",{children:[(0,x.jsx)("strong",{children:"AI Personality:"})," Define how the AI will behave (e.g., Friendly, Skeptical)."]}),(0,x.jsxs)("li",{children:[(0,x.jsx)("strong",{children:"Power Dynamic:"})," Set the relationship hierarchy (e.g., AI is boss, peers)."]}),(0,x.jsxs)("li",{children:[(0,x.jsx)("strong",{children:"Custom Details (Optional):"})," Add specific background or context to make the scenario unique."]})]}),(0,x.jsx)("p",{children:'Once configured, click "Start Interaction".'})]}),(0,x.jsxs)("section",{className:"space-y-3",children:[(0,x.jsx)("h2",{className:"text-2xl font-semibold text-teal-400",children:"2. Interacting with the AI"}),(0,x.jsxs)("ul",{className:"list-disc list-inside space-y-2 pl-4",children:[(0,x.jsxs)("li",{children:[(0,x.jsx)("strong",{children:"AI Visual & Body Language:"})," Pay attention to the AI's image and body language description. It reflects their mood and reaction to you."]}),(0,x.jsxs)("li",{children:[(0,x.jsx)("strong",{children:"Engagement Bar:"})," This shows how engaged the AI is with you. Aim to keep it high! It naturally decays slightly each turn, so consistent positive interaction is key. If it drops too low for too long, or if you reach maximum engagement, the conversation might conclude."]}),(0,x.jsxs)("li",{children:[(0,x.jsx)("strong",{children:"Your Responses:"})," Type your message in the text box. Try to be thoughtful, relevant, and engaging."]}),(0,x.jsxs)("li",{children:[(0,x.jsx)("strong",{children:"Sending Messages:"}),' Click "Send" or press Enter (without Shift).']}),(0,x.jsxs)("li",{children:[(0,x.jsx)("strong",{children:"Ending Early:"}),' You can click "End Conversation" at any time to move to the analysis. If engagement is maxed out, this button will change to "Finish".']}),(0,x.jsxs)("li",{children:[(0,x.jsx)("strong",{children:"Need Help Mid-Chat?"})," Click the ",(0,x.jsx)(k,{})," icon in the top right of the chat screen for a quick guide to the interface elements."]})]})]}),(0,x.jsxs)("section",{className:"space-y-3",children:[(0,x.jsx)("h2",{className:"text-2xl font-semibold text-teal-400",children:"3. Analysis & Feedback"}),(0,x.jsx)("p",{children:"After the conversation, you'll receive a detailed analysis of your performance, including scores for charisma, clarity, engagement, and adaptability, along with turn-by-turn feedback and overall tips."}),(0,x.jsx)("p",{children:"Use this feedback to understand your strengths and areas for improvement."})]}),(0,x.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mt-10",children:[(0,x.jsxs)("button",{onClick:()=>t(h.HERO),className:"w-full sm:w-auto flex-grow px-6 py-3 bg-slate-600 hover:bg-slate-500 text-white font-semibold rounded-lg text-lg shadow-md  transition-all duration-200 ease-in-out transform hover:scale-105 focus:outline-none  focus:ring-4 focus:ring-slate-400 focus:ring-opacity-50 flex items-center justify-center space-x-2","aria-label":"Back to Home",children:[(0,x.jsx)(A,{}),(0,x.jsx)("span",{children:"Back to Home"})]}),(0,x.jsxs)("button",{onClick:()=>t(h.SETUP),className:"w-full sm:w-auto flex-grow px-6 py-3 bg-green-600 hover:bg-green-500 text-white font-semibold rounded-lg text-lg shadow-lg  transition-all duration-200 ease-in-out transform hover:scale-105 focus:outline-none  focus:ring-4 focus:ring-green-400 focus:ring-opacity-50 flex items-center justify-center space-x-2","aria-label":"Start Interaction Setup",children:[(0,x.jsx)(I,{}),(0,x.jsx)("span",{children:"Start Interaction Setup"})]})]})]})},F=e=>{let{value:t,selectedValue:a,onChange:n,children:s,className:i="",disabled:o=!1}=e;return(0,x.jsx)("button",{type:"button",onClick:()=>!o&&n(t),disabled:o,className:"p-3 m-1 rounded-lg text-sm font-medium transition-all duration-200 ease-in-out transform focus:outline-none focus:ring-2 focus:ring-teal-400 focus:ring-opacity-75\n                ".concat(o?"bg-slate-500 text-gray-400 cursor-not-allowed":a===t?"bg-teal-500 text-white shadow-lg scale-105 ring-2 ring-teal-300":"bg-slate-700 hover:bg-slate-600 text-gray-300 hover:shadow-md hover:scale-102"," ").concat(i),children:s})},U=e=>{let{title:t,children:a,animationDelay:n}=e;return(0,x.jsxs)("div",{className:"mb-8 p-6 bg-slate-700/50 rounded-lg shadow-inner opacity-0 animate-[fadeInSlideUp_0.5s_ease-out_forwards]",style:{animationDelay:n},children:[(0,x.jsxs)("label",{className:"block text-xl font-semibold mb-4 text-teal-300",children:[t,":"]}),a]})},Y=["Arthur","David","Ethan","James","John","Liam","Michael","Noah","Robert","William","Daniel","Matthew","Ryan","Kevin","Mark"],H=["Anna","Chloe","Elizabeth","Emily","Emma","Isabella","Jennifer","Linda","Mary","Olivia","Sophia","Ava","Mia","Grace","Sarah"],G=["Alex","Jordan","Casey","Morgan","Riley","Skyler","Cameron","Drew","Kai","Phoenix","River","Sage","Blake","Jamie","Taylor","Avery","Devin","Emerson"],z=["Smith","Jones","Williams","Brown","Davis","Miller","Wilson","Moore","Taylor","Chen","Lee","Garcia","Rodriguez","Martinez","Kim","Patel","Singh","Walker","Hall"],V=e=>{let t;switch(e){case m.MALE:t=Y;break;case m.FEMALE:t=H;break;case m.NON_BINARY:case m.PREFER_NOT_TO_SPECIFY:default:t=G}let a=t[Math.floor(Math.random()*t.length)],n=z[Math.floor(Math.random()*z.length)];return"".concat(a," ").concat(n)},W=e=>{let{onStart:t}=e,[a,n]=(0,p.useState)(c.SOCIAL_GATHERING),[s,i]=(0,p.useState)(d.FRIENDLY_SUPPORTIVE),[o,r]=(0,p.useState)(u.PEERS_EQUAL_FOOTING),[l,h]=(0,p.useState)(m.PREFER_NOT_TO_SPECIFY),[f,y]=(0,p.useState)(""),[b,v]=(0,p.useState)("automatic"),[w,j]=(0,p.useState)(null),[N,k]=(0,p.useState)(""),[A,I]=(0,p.useState)(g.NOT_SPECIFIED),[S,E]=(0,p.useState)("automatic"),T=e=>{v(e),"automatic"===e&&(y(""),j(null))},C=e=>{E(e),"automatic"===e?I(g.NOT_SPECIFIED):A===g.NOT_SPECIFIED&&I(g.ADULT)};return(0,x.jsxs)("div",{className:"w-full max-w-3xl p-6 md:p-10 bg-slate-800 rounded-xl shadow-2xl space-y-6 opacity-0 animate-[fadeIn_0.3s_ease-out_forwards]",children:[(0,x.jsx)("h1",{className:"text-4xl md:text-5xl font-bold text-center text-teal-400 mb-6 drop-shadow-md opacity-0 animate-[fadeInSlideUp_0.5s_ease-out_forwards]",style:{animationDelay:"0.1s"},children:"Configure Your Interaction"}),(0,x.jsx)("p",{className:"text-center text-gray-400 mb-10 text-lg opacity-0 animate-[fadeInSlideUp_0.5s_ease-out_forwards]",style:{animationDelay:"0.2s"},children:"Set up the AI's persona and scenario to practice specific social skills with SosheIQ."}),(0,x.jsxs)("form",{onSubmit:e=>{e.preventDefault();let n=f.trim();if("automatic"===b?n=V(l):n||(n=V(l)),!n){j("AI name is required or could not be generated.");return}if(n.length>50){j("AI name cannot exceed 50 characters.");return}w&&j(null);let i=N.trim()||void 0;t({environment:a,aiPersonality:s,powerDynamic:o,aiGender:l,aiName:n,aiAgeBracket:"manual"===S?A:g.NOT_SPECIFIED,customContext:i})},className:"space-y-6",children:[(0,x.jsx)(U,{title:"AI Gender",animationDelay:"".concat(.2,"s"),children:(0,x.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:Object.values(m).map(e=>(0,x.jsx)(F,{value:e,selectedValue:l,onChange:h,children:e},e))})}),(0,x.jsxs)(U,{title:"AI Name",animationDelay:"".concat(.30000000000000004,"s"),children:[(0,x.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[(0,x.jsx)(F,{value:"manual",selectedValue:b,onChange:T,children:"Enter Name Manually"}),(0,x.jsx)(F,{value:"automatic",selectedValue:b,onChange:T,children:"Generate Name on Start"})]}),(0,x.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,x.jsxs)("div",{className:"flex-grow",children:[(0,x.jsx)("input",{type:"text",value:f,onChange:e=>{"manual"===b&&(y(e.target.value),w&&e.target.value.trim()&&j(null),e.target.value.length<=50&&"AI name cannot exceed 50 characters."===w&&j(null))},placeholder:"manual"===b?"E.g., Alex, Dr. Evelyn Reed":"[Name will be auto-generated on start]",className:"w-full p-3 bg-slate-600 text-gray-200 rounded-lg focus:outline-none focus:ring-2 \n                                ".concat(w&&"manual"===b?"ring-red-500":"focus:ring-teal-500","\n                                ").concat("automatic"===b?"cursor-not-allowed opacity-70":""),maxLength:51,"aria-describedby":w&&"manual"===b?"name-error":"name-helper","aria-invalid":!!w&&"manual"===b,disabled:"automatic"===b}),w&&"manual"===b&&(0,x.jsx)("p",{id:"name-error",className:"text-xs text-red-400 mt-1",children:w}),"manual"===b&&!w&&(0,x.jsx)("p",{id:"name-helper",className:"text-xs text-gray-400 mt-1",children:"Enter a name or use 'Suggest' (max 50 chars). Suggestion considers gender."}),"automatic"===b&&(0,x.jsx)("p",{id:"name-helper-auto",className:"text-xs text-gray-400 mt-1",children:"AI name will be generated based on gender when you start the interaction."})]}),"manual"===b&&(0,x.jsx)("button",{type:"button",onClick:()=>{"manual"===b&&(y(V(l)),w&&j(null))},className:"p-3 bg-sky-600 hover:bg-sky-500 text-white font-semibold rounded-lg text-sm transition-colors duration-150 h-[48px] flex-shrink-0",title:"Suggest a random name (considers selected gender)",children:"Suggest"})]})]}),(0,x.jsxs)(U,{title:"AI Age Bracket",animationDelay:"".concat(.4,"s"),children:[(0,x.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[(0,x.jsx)(F,{value:"automatic",selectedValue:S,onChange:C,children:"Auto-Select Age"}),(0,x.jsx)(F,{value:"manual",selectedValue:S,onChange:C,children:"Specify Age Bracket"})]}),(0,x.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:Object.values(g).filter(e=>e!==g.NOT_SPECIFIED).map(e=>(0,x.jsx)(F,{value:e,selectedValue:A,onChange:I,disabled:"automatic"===S,children:e},e))}),"automatic"===S&&(0,x.jsx)("p",{className:"text-xs text-gray-400 mt-2",children:"AI will generally adopt an adult persona unless context implies otherwise."}),"manual"===S&&(0,x.jsx)("p",{className:"text-xs text-gray-400 mt-2",children:"Select an age bracket to influence AI's persona, language, and appearance."})]}),(0,x.jsx)(U,{title:"Social Environment",animationDelay:"".concat(.5,"s"),children:(0,x.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:Object.values(c).map(e=>(0,x.jsx)(F,{value:e,selectedValue:a,onChange:n,children:e},e))})}),(0,x.jsx)(U,{title:"AI Personality",animationDelay:"".concat(.6000000000000001,"s"),children:(0,x.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:Object.values(d).map(e=>(0,x.jsx)(F,{value:e,selectedValue:s,onChange:i,children:e},e))})}),(0,x.jsx)(U,{title:"Power Dynamic",animationDelay:"".concat(.7,"s"),children:(0,x.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:Object.values(u).map(e=>(0,x.jsx)(F,{value:e,selectedValue:o,onChange:r,children:e},e))})}),(0,x.jsxs)(U,{title:"Custom Scenario Details (Optional)",animationDelay:"".concat(.8,"s"),children:[(0,x.jsx)("textarea",{value:N,onChange:e=>k(e.target.value),placeholder:"E.g., You are at a company holiday party. You recently received a promotion, and the AI is your direct competitor who also wanted that promotion. Or, you're on a first date set up by a mutual friend, and the AI knows this friend well...",className:"w-full p-3 bg-slate-600 text-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 min-h-[100px] text-sm",rows:4,maxLength:1e3,"aria-label":"Custom scenario details"}),(0,x.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Provide any additional specific context for the AI (max 1000 chars)."})]}),(0,x.jsx)("button",{type:"submit",className:"w-full bg-green-600 hover:bg-green-500 text-white font-bold py-4 px-6 rounded-lg text-xl shadow-lg  transition-all duration-200 ease-in-out transform hover:scale-105 hover:shadow-xl  focus:outline-none focus:ring-4 focus:ring-green-400 focus:ring-opacity-50 opacity-0 animate-[fadeInSlideUp_0.5s_ease-out_forwards]",style:{animationDelay:"".concat(.9000000000000001,"s")},children:"Start Interaction"})]})]})},Q="gemini-2.5-flash-preview-04-17",J={low:"bg-red-500",medium:"bg-yellow-500",high:"bg-green-500"},q=e=>{let{percentage:t}=e,a=Math.max(0,Math.min(100,t)),n=J.medium;return a<=33?n=J.low:a>=67&&(n=J.high),(0,x.jsx)("div",{className:"w-full bg-slate-700 rounded-full h-4 shadow-inner overflow-hidden relative",children:(0,x.jsx)("div",{className:"h-full rounded-full ".concat(n," transition-all duration-700 ease-out"),style:{width:"".concat(a,"%")},role:"progressbar","aria-valuenow":a,"aria-valuemin":0,"aria-valuemax":100,"aria-label":"Engagement: ".concat(a,"%")})})},K=e=>{let{imageBase64:t,bodyLanguageDescription:a,isLoading:n}=e,[s,i]=(0,p.useState)(null),[o,r]=(0,p.useState)(null),[l,c]=(0,p.useState)(!1),d=(0,p.useRef)(null);(0,p.useEffect)(()=>{t&&t!==d.current?(s?(r(t),c(!0)):(i(t),r(null),c(!1)),d.current=t):!t&&s&&(i(null),r(null),c(!1),d.current=null)},[t,s]);let u=n&&!s&&!o;return(0,x.jsxs)("div",{className:"w-full flex-grow min-h-0 flex flex-col items-center",children:[(0,x.jsx)("div",{className:"w-full h-[55vh] md:h-auto flex-grow md:min-h-0 md:max-h-full rounded-lg flex items-center justify-center overflow-hidden shadow-xl relative",children:u?(0,x.jsxs)("div",{className:"w-full h-full flex items-center justify-center text-slate-500",children:[" ",(0,x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-1/3 w-1/3 opacity-50 animate-pulse",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1,children:(0,x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})]}):(0,x.jsxs)(x.Fragment,{children:[s&&(0,x.jsx)("img",{src:"data:image/jpeg;base64,".concat(s),alt:"AI's current visual cue",className:"absolute inset-0 w-full h-full object-cover",style:{opacity:o&&l?0:1,transition:o&&l?"opacity 0.75s ease-in-out":"none"}},"displayed-".concat(s.substring(0,20))),o&&l&&(0,x.jsx)("img",{src:"data:image/jpeg;base64,".concat(o),alt:"AI's new visual cue",className:"absolute inset-0 w-full h-full object-cover animate-image-cross-fade-in opacity-0",onAnimationEnd:()=>{o&&i(o),r(null),c(!1)}},"incoming-".concat(o.substring(0,20)))]})}),a&&(0,x.jsx)("p",{className:"w-full text-sm text-center md:text-left text-sky-300 italic px-2 py-1 whitespace-pre-wrap break-words flex-shrink-0",children:a})]})},Z=e=>{let{text:t,startAnimation:a,letterFadeDuration:n=300}=e;return t?(0,x.jsx)("p",{className:"whitespace-pre-wrap min-h-[1em] break-words ".concat(a?"animate-letter-fade-in":"opacity-100"),style:a?{animationDuration:"".concat(n,"ms")}:{},children:t}):null},X=e=>{let{message:t,isLastMessage:a,isLoadingAI:n}=e,[s,i]=(0,p.useState)(!1);(0,p.useEffect)(()=>{a&&!n&&(t.text||t.bodyLanguageDescription)?i(!0):i(!1)},[a,n,t.text,t.bodyLanguageDescription,t.id]);let o=t.bodyLanguageDescription?t.bodyLanguageDescription.replace(/[()]/g,""):null;if(!t.text&&!o&&!n)return null;let r=a&&!n&&s;return(0,x.jsxs)("div",{className:"\n        max-w-xl px-4 py-3 rounded-xl shadow-md bg-slate-600 text-gray-200 rounded-bl-none\n        ".concat(s&&!r?"animate-[fadeIn_1s_ease-out_forwards]":"opacity-100"," \n      "),children:[o&&(0,x.jsx)("p",{className:"text-sm italic text-sky-300 mb-2 whitespace-pre-wrap break-words ".concat(r?"animate-[fadeIn_0.5s_ease-out_forwards]":""),children:o}),t.text?(0,x.jsx)(Z,{text:t.text,startAnimation:r}):!o&&(0,x.jsx)("p",{className:"whitespace-pre-wrap text-gray-400 italic",children:"..."}),(t.text||o)&&(0,x.jsxs)("div",{className:"flex items-center justify-end mt-2 text-xs opacity-90 ".concat(r?"opacity-0 animate-[fadeIn_0.5s_ease-out_1s_forwards]":""),children:[" ",(0,x.jsx)("p",{className:"text-gray-400 ml-auto",children:new Date(t.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})},$=e=>{let{message:t}=e;return t.text&&""!==t.text.trim()?(0,x.jsx)("div",{className:"flex justify-start w-full opacity-0 animate-[fadeIn_0.5s_ease-out_forwards]",style:{animationDelay:"0.1s"},children:(0,x.jsxs)("div",{className:"\n          max-w-xl lg:max-w-2xl px-4 py-3 rounded-xl shadow-md bg-purple-800 text-purple-200 \n          border border-purple-700 rounded-bl-none relative\n        ",role:"log","aria-live":"polite",children:[(0,x.jsxs)("div",{className:"flex items-start text-xs text-purple-400 mb-1.5",children:[(0,x.jsx)(D,{}),(0,x.jsx)("span",{className:"ml-1.5 font-semibold",children:"AI's thoughts"})]}),(0,x.jsx)("p",{className:"whitespace-pre-wrap italic text-sm break-words",children:t.text}),(0,x.jsx)("p",{className:"text-xs mt-1.5 opacity-70 text-right text-purple-400",children:new Date(t.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})}):null},ee=e=>{let{message:t}=e;return(0,x.jsx)("div",{className:"flex justify-start opacity-0 animate-[fadeIn_0.3s_ease-out_forwards]",children:(0,x.jsx)("div",{className:"max-w-xl lg:max-w-2xl px-4 py-3 rounded-xl shadow-md bg-slate-600 text-gray-200 rounded-bl-none min-h-[50px] flex items-center",role:"log","aria-live":"polite","aria-label":"AI is thinking",children:(0,x.jsxs)("div",{className:"flex space-x-1.5 items-center",children:[(0,x.jsx)("span",{className:"thinking-dot w-2.5 h-2.5 bg-sky-300 rounded-full"}),(0,x.jsx)("span",{className:"thinking-dot w-2.5 h-2.5 bg-sky-300 rounded-full"}),(0,x.jsx)("span",{className:"thinking-dot w-2.5 h-2.5 bg-sky-300 rounded-full"})]})})})},et=e=>{let{message:t,isLastMessage:a,isLoadingAI:n}=e;return"user"===t.sender?(0,x.jsx)("div",{className:"flex justify-end",children:(0,x.jsxs)("div",{className:"max-w-xl px-4 py-3 rounded-xl shadow-md bg-sky-600 text-white rounded-br-none",children:[(0,x.jsx)("p",{className:"whitespace-pre-wrap break-words",children:t.text}),(0,x.jsx)("p",{className:"text-xs mt-1 opacity-70 text-right",children:new Date(t.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})}):t.isThinkingBubble?(0,x.jsx)(ee,{message:t}):t.isThoughtBubble?(0,x.jsx)("div",{className:"flex justify-start",children:(0,x.jsx)($,{message:t})}):(0,x.jsx)("div",{className:"flex justify-start",children:(0,x.jsx)(X,{message:t,isLastMessage:a,isLoadingAI:n})})},ea=e=>{let{conversationHistory:t,currentEngagement:a,onSendMessage:n,onEndConversation:s,isLoadingAI:i,scenarioDetailsAiName:o,isMaxEngagement:r,isOverlay:l,onCloseOverlay:c,showGlobalAiThoughts:d,onToggleGlobalAiThoughts:u,onToggleHelpOverlay:m,onToggleQuickTipsOverlay:g}=e,[h,f]=(0,p.useState)(""),[y,b]=(0,p.useState)(!1),j=(0,p.useRef)(null),A=(0,p.useRef)(null),[I,L]=(0,p.useState)([]);(0,p.useEffect)(()=>{let e=[];for(let a=0;a<t.length;a++){let n=t[a];d&&"ai"===n.sender&&n.aiThoughts&&""!==n.aiThoughts.trim()&&!n.isThoughtBubble&&e.push({id:"".concat(n.id,"-thoughts"),sender:"ai",text:n.aiThoughts,timestamp:new Date(n.timestamp.getTime()-1),isThoughtBubble:!0}),e.push(n)}L(e)},[t,d]),(0,p.useEffect)(()=>{var e,t;if(y||I.length<=4)null===(e=j.current)||void 0===e||e.scrollIntoView({behavior:"smooth"});else{let e=A.current;e&&e.scrollHeight-e.scrollTop<=e.clientHeight+200&&(null===(t=j.current)||void 0===t||t.scrollIntoView({behavior:"smooth"}))}},[I,y]);let _=()=>{h.trim()&&(n(h.trim()),f(""),!y&&I.length>3&&b(!0))},M=y?I:I.slice(-3),O=I.length>3;return(0,x.jsxs)("div",{className:"flex flex-col h-full ".concat(l?"bg-transparent":"bg-slate-800"),children:[(0,x.jsx)(()=>(0,x.jsxs)("div",{className:"flex-shrink-0 flex justify-between items-center p-3 \n                    ".concat(l?"bg-slate-800/40 backdrop-blur-sm border-b border-slate-700/50":"bg-slate-700/50 border-b border-slate-600/50"),children:[(0,x.jsx)("h3",{className:"text-lg font-semibold text-sky-400",children:l?"Chat with ".concat(o):"Conversation with ".concat(o)}),(0,x.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,x.jsx)("button",{onClick:u,className:"p-2 rounded-full transition-colors duration-150 shadow-sm\n                            ".concat(d?"bg-purple-600 hover:bg-purple-500 text-white ring-1 ring-purple-400":"".concat(l?"bg-slate-700/30":"bg-slate-700/70"," hover:bg-slate-600 text-purple-300 hover:text-purple-100 ring-1 ring-slate-500")),"aria-label":d?"Hide AI's thoughts":"Show AI's thoughts",title:d?"Hide AI's internal thoughts":"Show AI's internal thoughts",children:(0,x.jsx)(D,{})}),(0,x.jsx)("button",{onClick:g,className:"p-2 text-sky-300 hover:text-sky-100 rounded-full transition-colors duration-150 shadow-sm\n                            ".concat(l?"bg-slate-700/30":"bg-slate-700/70"," hover:bg-slate-600"),"aria-label":"View Quick Tips",title:"Quick Tips",children:(0,x.jsx)(S,{})}),(0,x.jsx)("button",{onClick:m,className:"p-2 text-sky-300 hover:text-sky-100 rounded-full transition-colors duration-150 shadow-sm\n                            ".concat(l?"bg-slate-700/30":"bg-slate-700/70"," hover:bg-slate-600"),"aria-label":"Show help for chat interface",title:"Help",children:(0,x.jsx)(k,{})}),l&&c&&(0,x.jsx)("button",{onClick:c,className:"p-2 text-gray-400 hover:text-gray-200 bg-slate-700/30 hover:bg-slate-600 rounded-full transition-colors","aria-label":"Close chat",title:"Close Chat",children:(0,x.jsx)(E,{})})]})]}),{}),(0,x.jsxs)("div",{ref:A,className:"flex-grow p-1 md:p-4 overflow-y-auto space-y-2 min-h-0 relative ".concat(l?"bg-transparent":"bg-slate-800/90"),children:[O&&(0,x.jsx)("div",{className:"sticky top-0 z-10 py-2 ".concat(l?"bg-slate-900/30 backdrop-blur-sm":"bg-slate-800/80 backdrop-blur-sm"," flex justify-center"),children:(0,x.jsxs)("button",{onClick:()=>{b(e=>!e)},className:"text-xs text-sky-300 hover:text-sky-100 bg-slate-700 hover:bg-slate-600 px-3 py-1.5 rounded-full shadow transition-colors duration-150 flex items-center space-x-1.5",children:[y?(0,x.jsx)(C,{}):(0,x.jsx)(T,{}),(0,x.jsx)("span",{children:y?"Show Fewer Messages":"Show More Messages (".concat(I.filter(e=>!e.isThoughtBubble).length,")")})]})}),(0,x.jsx)("div",{className:"space-y-4 pt-1",children:M.map((e,a)=>{var n,s;return(0,x.jsx)(et,{message:e,isLastMessage:a===M.length-1&&e.id===(null===(n=t[t.length-1])||void 0===n?void 0:n.id)&&!e.isThoughtBubble,isLoadingAI:i&&a===M.length-1&&e.id===(null===(s=t[t.length-1])||void 0===s?void 0:s.id)&&!e.isThoughtBubble},e.id)})}),(0,x.jsx)("div",{ref:j})]}),(0,x.jsxs)("div",{className:"p-4 border-t ".concat(l?"border-slate-700/50 bg-slate-800/40 backdrop-blur-sm":"border-slate-600 bg-slate-700"," flex-shrink-0"),children:[r&&(0,x.jsx)("p",{className:"text-center text-green-400 font-semibold mb-2 animate-pulse",children:"\uD83C\uDF89 Max Engagement Reached! Click 'Finish' to review your performance."}),(0,x.jsxs)("div",{className:"flex items-start sm:items-center space-x-2",children:[(0,x.jsx)("textarea",{value:h,onChange:e=>f(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),_())},placeholder:"Type your response...",className:"flex-grow p-3 text-gray-200 rounded-lg focus:ring-2 focus:ring-sky-500 focus:outline-none resize-none\n                        ".concat(l?"bg-slate-700/80":"bg-slate-600"),rows:h.split("\n").length>2?3:h.split("\n").length>1?2:1,style:{maxHeight:"calc(3 * 1.5rem + 2 * 0.75rem + 2 * 0.125rem)"},"aria-label":"Your response input",disabled:i}),(0,x.jsxs)("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2 h-full",children:[(0,x.jsxs)("button",{onClick:_,disabled:!h.trim()||i,className:"p-3 bg-sky-600 hover:bg-sky-700 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-150 flex items-center justify-center space-x-2 flex-grow sm:flex-grow-0 min-h-[48px] sm:min-h-0","aria-label":"Send message",children:[(0,x.jsx)(v,{}),(0,x.jsx)("span",{className:"hidden sm:inline",children:"Send"})]}),(0,x.jsxs)("button",{onClick:()=>{s(),l&&c&&setTimeout(()=>{c()},100)},disabled:i,className:"p-3 text-white rounded-lg transition-colors duration-150 flex items-center justify-center space-x-2 disabled:opacity-60 disabled:cursor-not-allowed flex-grow sm:flex-grow-0 min-h-[48px] sm:min-h-0\n                            ".concat(r?"bg-green-600 hover:bg-green-700 animate-pulse-glow":"bg-red-600 hover:bg-red-700"),"aria-label":r?"Finish conversation":"End conversation",children:[r?(0,x.jsx)(N,{}):(0,x.jsx)(w,{}),(0,x.jsx)("span",{className:"hidden sm:inline",children:r?"Finish":"End"})]})]})]})]})]})},en=e=>{for(let t=e.length-1;t>=0;t--){let a=e[t];if("ai"===a.sender&&!a.isThoughtBubble&&!a.isThinkingBubble&&a.bodyLanguageDescription)return a.bodyLanguageDescription}},es=e=>{let{scenarioDetails:t,conversationHistory:a,currentEngagement:n,onSendMessage:s,onEndConversation:i,aiImageBase64:o,isLoadingAI:r,onToggleHelpOverlay:l,onToggleQuickTipsOverlay:c,showGlobalAiThoughts:d,onToggleGlobalAiThoughts:u}=e,[m,g]=(0,p.useState)(!1),h=en(a)||(0===a.length?"Initializing...":"AI is present.");return(0,p.useEffect)(()=>{let e=e=>{"Escape"===e.key&&m&&g(!1)};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[m]),(0,x.jsxs)("div",{className:"w-full max-w-5xl h-[85vh] flex flex-col md:flex-row bg-slate-800 shadow-2xl rounded-xl overflow-hidden relative",children:[(0,x.jsxs)("div",{className:"\n          w-full md:w-2/5 flex flex-col p-4 bg-slate-800/80\n          ".concat(m?"hidden":"flex"," \n          md:flex md:flex-col md:h-full md:border-r md:border-slate-700 md:overflow-y-auto\n        "),children:[(0,x.jsxs)("div",{className:"text-center md:text-left w-full px-2 mb-2 flex-shrink-0",children:[(0,x.jsx)("h2",{className:"text-lg font-semibold text-sky-400",children:t.aiName}),(0,x.jsx)("p",{className:"text-xs text-gray-400",children:t.aiPersonality}),(0,x.jsxs)("p",{className:"text-xs text-gray-400",children:[t.environment," | ",t.powerDynamic]})]}),(0,x.jsx)("div",{className:"flex-grow min-h-0 relative flex flex-col",children:(0,x.jsx)(K,{imageBase64:o,bodyLanguageDescription:h,isLoading:r&&!o})}),(0,x.jsxs)("div",{className:"pt-4 w-full px-2 flex-shrink-0",children:[(0,x.jsxs)("label",{htmlFor:"engagement",className:"block text-sm font-medium text-sky-300 mb-1 text-center",children:[t.aiName,"'s Engagement: ",n,"%"]}),(0,x.jsx)(q,{percentage:n})]})]}),(0,x.jsx)("div",{className:"hidden md:flex md:flex-1 md:flex-col md:bg-slate-800 md:overflow-hidden md:h-full",children:(0,x.jsx)(ea,{conversationHistory:a,currentEngagement:n,onSendMessage:s,onEndConversation:i,isLoadingAI:r,scenarioDetailsAiName:t.aiName,isMaxEngagement:n>=100,isOverlay:!1,showGlobalAiThoughts:d,onToggleGlobalAiThoughts:u,onToggleHelpOverlay:l,onToggleQuickTipsOverlay:c})}),!m&&(0,x.jsx)("button",{onClick:()=>g(!0),className:"md:hidden fixed bottom-6 right-6 z-30 bg-sky-600 text-white p-4 rounded-full shadow-xl hover:bg-sky-500 transition-all duration-150 ease-in-out transform hover:scale-110 focus:outline-none focus:ring-4 focus:ring-sky-400 focus:ring-opacity-50","aria-label":"Open chat",children:(0,x.jsx)(L,{})}),m&&(0,x.jsx)("div",{className:"md:hidden fixed inset-0 z-40 bg-slate-900/50 backdrop-blur-md flex flex-col animate-[fadeIn_0.2s_ease-out]",children:(0,x.jsx)("div",{className:"flex-1 flex flex-col overflow-hidden",children:(0,x.jsx)(ea,{conversationHistory:a,currentEngagement:n,onSendMessage:s,onEndConversation:i,isLoadingAI:r,scenarioDetailsAiName:t.aiName,isMaxEngagement:n>=100,isOverlay:!0,onCloseOverlay:()=>g(!1),showGlobalAiThoughts:d,onToggleGlobalAiThoughts:u,onToggleHelpOverlay:l,onToggleQuickTipsOverlay:c})})})]})},ei=e=>{let{message:t="Loading...",extraClasses:a=""}=e;return(0,x.jsxs)("div",{className:"fixed inset-0 bg-slate-900 bg-opacity-85 flex flex-col items-center justify-center z-50 transition-opacity duration-300 ease-in-out ".concat(a),role:"status","aria-live":"assertive","aria-label":t,children:[(0,x.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-sky-500 mb-4"}),(0,x.jsx)("p",{className:"text-xl text-sky-300 font-semibold mb-4",children:t})]})};var eo=a(1819),er=a(1120),el=a.n(er);let ec=e=>{let{label:t,score:a}=e;return(0,x.jsxs)("div",{className:"bg-slate-700 p-4 rounded-lg shadow",children:[(0,x.jsx)("h3",{className:"text-md font-semibold text-sky-400 mb-2",children:t}),"number"==typeof a?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(q,{percentage:a}),(0,x.jsxs)("p",{className:"text-right text-2xl font-bold text-white mt-1",children:[a,"%"]})]}):(0,x.jsx)("p",{className:"text-gray-400 text-sm italic",children:"Not available"})]})},ed=e=>{let{item:t,index:a,aiName:n,showPerTurnScores:s}=e;return(0,x.jsxs)("div",{className:"p-4 bg-slate-700 rounded-lg shadow mb-3",children:[(0,x.jsxs)("p",{className:"text-sm text-sky-300 font-semibold mb-1",children:["Exchange ",a+1]}),t.userInput&&(0,x.jsxs)("div",{className:"mb-2",children:[(0,x.jsxs)("p",{className:"text-gray-300 italic mb-1",children:[(0,x.jsx)("strong",{children:"You:"}),' "',t.userInput,'"']}),s&&"number"==typeof t.userTurnEffectivenessScore&&(0,x.jsxs)("div",{className:"mt-1 p-1.5 bg-cyan-800/40 border border-cyan-700/50 rounded-md",children:[(0,x.jsxs)("div",{className:"flex items-center text-xs text-cyan-400",children:[(0,x.jsx)(_,{}),(0,x.jsx)("span",{className:"ml-1.5 font-semibold",children:"Your Effectiveness This Turn:"}),(0,x.jsxs)("span",{className:"ml-auto text-cyan-200 font-bold text-sm",children:[t.userTurnEffectivenessScore,"%"]})]}),(0,x.jsx)(q,{percentage:t.userTurnEffectivenessScore})]})]}),t.aiResponse&&(0,x.jsxs)("div",{className:"mb-1",children:[(0,x.jsxs)("p",{className:"text-gray-400 italic",children:[(0,x.jsxs)("strong",{children:[n,":"]}),' "',t.aiResponse,'"']}),s&&"number"==typeof t.conversationMomentum&&(0,x.jsxs)("div",{className:"mt-1 p-1.5 bg-green-800/40 border border-green-700/50 rounded-md",children:[(0,x.jsxs)("div",{className:"flex items-center text-xs text-green-400",children:[(0,x.jsx)(O,{}),(0,x.jsx)("span",{className:"ml-1.5 font-semibold",children:"Conversation Momentum:"}),(0,x.jsxs)("span",{className:"ml-auto text-green-200 font-bold text-sm",children:[t.conversationMomentum,"%"]})]}),(0,x.jsx)(q,{percentage:t.conversationMomentum})]})]}),t.aiBodyLanguage&&(0,x.jsxs)("div",{className:"mt-2 p-2.5 bg-yellow-800/20 border border-yellow-700/40 rounded-md",children:[(0,x.jsxs)("div",{className:"flex items-center text-xs text-yellow-500 mb-1",children:[(0,x.jsx)(L,{}),(0,x.jsxs)("span",{className:"ml-1.5 font-semibold",children:[n,"'s Body Language:"]})]}),(0,x.jsx)("p",{className:"text-yellow-200 italic text-sm whitespace-pre-wrap",children:t.aiBodyLanguage})]}),t.aiThoughts&&(0,x.jsxs)("div",{className:"mt-2 p-2.5 bg-purple-800/50 border border-purple-700/60 rounded-md",children:[(0,x.jsxs)("div",{className:"flex items-center text-xs text-purple-400 mb-1",children:[(0,x.jsx)(D,{}),(0,x.jsxs)("span",{className:"ml-1.5 font-semibold",children:[n,"'s Internal Thoughts:"]})]}),(0,x.jsx)("p",{className:"text-purple-200 italic text-sm whitespace-pre-wrap",children:t.aiThoughts})]}),(0,x.jsx)("p",{className:"text-gray-200 mt-2 pt-2 border-t border-slate-600/70 whitespace-pre-wrap",children:t.analysis})]})},eu=e=>{let{report:t,isLoadingReport:a,errorReport:n,onRestart:s,scenarioDetails:i}=e,o=(0,p.useRef)(null),r=(0,p.useRef)(null),[l,c]=(0,p.useState)(!1),d=async()=>{if(!o.current||!t||!r.current)return;let e=document.body.style.backgroundColor,a=r.current,n=o.current,s=a.style.maxHeight,l=a.style.overflow,c=n.style.maxWidth;try{document.body.style.backgroundColor="white",a.style.maxHeight="none",a.style.overflow="visible",n.style.maxWidth="none";let e=await el()(n,{scale:2,useCORS:!0,backgroundColor:"#1e293b"}),t=e.toDataURL("image/png"),s=new eo.ZP({orientation:"portrait",unit:"pt",format:"a4"}),o=s.internal.pageSize.getWidth(),r=s.internal.pageSize.getHeight(),l=e.width,c=e.height,d=l/c,u=o-40,m=u/d;m>r-40&&(u=(m=r-40)*d);let g=(o-u)/2;s.addImage(t,"PNG",g,20,u,m);let h=i.aiName?i.aiName.replace(/\s+/g,"_"):"AI";s.save("SosheIQ-Analysis-".concat(h,"-").concat(new Date().toISOString().split("T")[0],".pdf"))}catch(e){console.error("Error generating PDF:",e)}finally{document.body.style.backgroundColor=e,a.style.maxHeight=s,a.style.overflow=l,n.style.maxWidth=c}};if(a)return(0,x.jsx)(ei,{message:"Generating your performance analysis..."});if(n)return(0,x.jsxs)("div",{className:"w-full max-w-3xl p-6 bg-slate-800 rounded-xl shadow-2xl text-center",children:[(0,x.jsx)("h2",{className:"text-3xl font-bold text-red-500 mb-4",children:"Analysis Error"}),(0,x.jsx)("p",{className:"text-gray-300 mb-6",children:n}),(0,x.jsx)("button",{onClick:s,className:"bg-sky-600 hover:bg-sky-700 text-white font-bold py-3 px-6 rounded-lg text-lg transition-colors",children:"Start New Interaction"})]});if(!t)return(0,x.jsxs)("div",{className:"w-full max-w-3xl p-6 bg-slate-800 rounded-xl shadow-2xl text-center",children:[(0,x.jsx)("h2",{className:"text-3xl font-bold text-yellow-500 mb-4",children:"Analysis Not Available"}),(0,x.jsx)("p",{className:"text-gray-300 mb-6",children:"The analysis report could not be generated. Please try another session."}),(0,x.jsx)("button",{onClick:s,className:"bg-sky-600 hover:bg-sky-700 text-white font-bold py-3 px-6 rounded-lg text-lg transition-colors",children:"Start New Interaction"})]});let u=i.aiAgeBracket&&i.aiAgeBracket!==g.NOT_SPECIFIED?" | Age: ".concat(i.aiAgeBracket):"";return(0,x.jsxs)("div",{className:"w-full max-w-4xl p-6 bg-slate-800 rounded-xl shadow-2xl space-y-6",children:[(0,x.jsxs)("div",{ref:o,className:"p-4 bg-slate-800 text-gray-100",children:[(0,x.jsx)("h1",{className:"text-4xl font-bold text-center text-sky-400 mb-2",children:"Interaction Analysis"}),(0,x.jsxs)("p",{className:"text-center text-gray-400 text-sm mb-6",children:["Scenario: ",i.environment," | AI: ",i.aiName," ","(",i.aiPersonality,", ",i.aiGender,u,")",(0,x.jsx)("br",{}),"Dynamic: ",i.powerDynamic,i.customContext&&(0,x.jsxs)("span",{className:"block mt-1 text-xs italic",children:["Custom Context: ",i.customContext]})]}),(0,x.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[(0,x.jsx)(ec,{label:"Overall Charisma",score:t.overallCharismaScore}),(0,x.jsx)(ec,{label:"Response Clarity",score:t.responseClarityScore}),(0,x.jsx)(ec,{label:"Engagement Maintenance",score:t.engagementMaintenanceScore}),(0,x.jsx)(ec,{label:"Adaptability",score:t.adaptabilityScore}),"number"==typeof t.overallAiEffectivenessScore&&(0,x.jsx)(ec,{label:"Overall AI Effectiveness",score:t.overallAiEffectivenessScore})]}),(0,x.jsx)(ec,{label:"Final ".concat(i.aiName,"'s Engagement"),score:t.finalEngagementSnapshot}),(0,x.jsxs)("div",{className:"bg-slate-700 p-4 rounded-lg shadow mt-6",children:[(0,x.jsx)("h3",{className:"text-xl font-semibold text-sky-400 mb-3",children:"Overall Feedback & Tips"}),(0,x.jsx)("p",{className:"text-gray-200 whitespace-pre-wrap",children:t.overallFeedback})]}),t.aiEvolvingThoughtsSummary&&(0,x.jsxs)("div",{className:"bg-slate-700 p-4 rounded-lg shadow mt-6",children:[(0,x.jsxs)("h3",{className:"text-xl font-semibold text-purple-400 mb-3",children:["Summary of ",i.aiName,"'s Evolving Thoughts"]}),(0,x.jsx)("p",{className:"text-gray-200 whitespace-pre-wrap italic",children:t.aiEvolvingThoughtsSummary})]}),(0,x.jsxs)("div",{className:"mt-6",children:[(0,x.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,x.jsx)("h3",{className:"text-xl font-semibold text-sky-400",children:"Turn-by-Turn Breakdown"}),(0,x.jsxs)("button",{onClick:()=>c(e=>!e),className:"px-3 py-1.5 text-xs font-medium rounded-md transition-colors duration-150 flex items-center space-x-1.5 bg-slate-700 hover:bg-slate-600 text-cyan-300 hover:text-cyan-100 focus:outline-none focus:ring-2 focus:ring-cyan-500",title:l?"Hide Turn Scores":"Show Turn Scores (User Effectiveness & Momentum)",children:[l?(0,x.jsx)(M,{}):(0,x.jsx)(_,{}),(0,x.jsxs)("span",{children:[l?"Hide":"Show"," Turn Scores"]})]})]}),(0,x.jsx)("div",{ref:r,className:"max-h-96 overflow-y-auto pr-2 space-y-3 bg-slate-800 p-3 rounded-md border border-slate-700",children:t.turnByTurnAnalysis.map((e,t)=>(0,x.jsx)(ed,{item:e,index:t,aiName:i.aiName||"AI",showPerTurnScores:l},t))})]})]}),(0,x.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 mt-8",children:[(0,x.jsx)("button",{onClick:s,className:"w-full sm:w-auto flex-grow bg-green-600 hover:bg-green-700 text-white font-bold py-4 px-6 rounded-lg text-xl shadow-lg transition-transform duration-150 hover:scale-105 focus:outline-none focus:ring-4 focus:ring-green-500 focus:ring-opacity-50",children:"Start New Interaction"}),(0,x.jsxs)("button",{onClick:d,className:"w-full sm:w-auto bg-sky-600 hover:bg-sky-700 text-white font-bold py-4 px-6 rounded-lg text-xl shadow-lg transition-transform duration-150 hover:scale-105 focus:outline-none focus:ring-4 focus:ring-sky-500 focus:ring-opacity-50 flex items-center justify-center gap-2",title:"Download analysis as PDF",children:[(0,x.jsx)(j,{})," Export to PDF"]})]})]})},em=e=>{let{title:t,description:a,delay:n}=e;return(0,x.jsxs)("div",{className:"bg-sky-800 p-5 rounded-xl shadow-2xl animate-zoomInFeature ring-1 ring-sky-700/50",style:{animationDelay:n},role:"listitem",children:[(0,x.jsxs)("h3",{className:"text-xl font-semibold text-sky-300 mb-2 flex items-center",children:[(0,x.jsx)(k,{}),(0,x.jsx)("span",{className:"ml-2",children:t})]}),(0,x.jsx)("p",{className:"text-sm text-sky-100/90",children:a})]})},eg=[{title:"AI Visual & Body Language",description:"Observe the AI's image and described body language. It reflects their reactions and current mood in response to your messages.",delay:"0.05s"},{title:"Engagement Bar",description:"This bar shows the AI's interest level. Aim to keep it high by being engaging and relevant! Low engagement can end the chat.",delay:"0.15s"},{title:"Your Response Area",description:"Type your message here. Be thoughtful! Press Enter (without Shift) or click 'Send' to reply.",delay:"0.25s"},{title:"Action Buttons",description:"'Send' submits your message. 'End' (or 'Finish' at max engagement) concludes the interaction to review your performance analysis.",delay:"0.35s"}],eh=e=>{let{onClose:t}=e;return(0,p.useEffect)(()=>{let e=e=>{"Escape"===e.key&&t()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[t]),(0,x.jsx)("div",{className:"fixed inset-0 bg-slate-900/85 flex items-center justify-center z-[100] p-4 animate-[fadeIn_0.2s_ease-out]",onClick:t,role:"dialog","aria-modal":"true","aria-labelledby":"help-overlay-title",children:(0,x.jsxs)("div",{className:"w-full max-w-3xl bg-slate-800/80 backdrop-blur-md rounded-2xl shadow-2xl flex flex-col max-h-[90vh] animate-[fadeInSlideUp_0.3s_ease-out_forwards] ring-1 ring-slate-700",onClick:e=>e.stopPropagation(),children:[(0,x.jsxs)("div",{className:"flex justify-between items-center p-5 border-b border-slate-700/80",children:[(0,x.jsx)("h2",{id:"help-overlay-title",className:"text-2xl md:text-3xl font-bold text-sky-400",children:"Understanding the Interface"}),(0,x.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-200 p-1.5 rounded-full hover:bg-slate-700 transition-colors","aria-label":"Close help",children:(0,x.jsx)(E,{})})]}),(0,x.jsx)("div",{className:"overflow-y-auto p-5 md:p-7 space-y-5",role:"list",children:eg.map(e=>(0,x.jsx)(em,{title:e.title,description:e.description,delay:e.delay},e.title))}),(0,x.jsx)("div",{className:"flex justify-center p-5 border-t border-slate-700/80",children:(0,x.jsx)("button",{onClick:t,className:"px-8 py-3 bg-sky-600 hover:bg-sky-500 text-white font-semibold rounded-lg text-lg shadow-md  transition-all duration-200 ease-in-out transform hover:scale-105 focus:outline-none  focus:ring-4 focus:ring-sky-400 focus:ring-opacity-50 animate-zoomInFeature",style:{animationDelay:"0.45s"},children:"Got it!"})})]})})},ex=[{title:"Listen Actively",description:"Focus entirely on what the other person is saying, rather than planning your response. Ask clarifying questions to show engagement and ensure understanding."},{title:"Ask Open-Ended Questions",description:"Encourage more than a 'yes' or 'no' answer. Questions starting with 'How,' 'Why,' or 'What if' can lead to richer conversations."},{title:"Maintain Good Eye Contact",description:"Shows confidence and interest. Aim for a natural and comfortable level of eye contact, avoiding staring or looking away too often."},{title:"Be Mindful of Body Language",description:"Your posture, gestures, and facial expressions communicate a lot. An open, relaxed posture can make you seem more approachable."},{title:"Find Common Ground",description:"Look for shared interests, experiences, or opinions. This helps build rapport and makes the interaction more enjoyable for both parties."},{title:"Show Genuine Interest",description:"People appreciate it when you're genuinely curious about them and their perspectives. Ask follow-up questions and remember details they share."},{title:"Practice Empathy",description:"Try to understand and share the feelings of others. Acknowledging their emotions can strengthen connection and trust."}],ep=e=>{let{onClose:t}=e;return(0,p.useEffect)(()=>{let e=e=>{"Escape"===e.key&&t()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[t]),(0,x.jsx)("div",{className:"fixed inset-0 bg-slate-900/80 flex items-center justify-center z-[100] p-4 animate-[fadeIn_0.3s_ease-out]",onClick:t,role:"dialog","aria-modal":"true","aria-labelledby":"quick-tips-title",children:(0,x.jsxs)("div",{className:"w-full max-w-2xl bg-slate-800 rounded-xl shadow-2xl space-y-6 text-gray-300 animate-[fadeInSlideUp_0.3s_ease-out_forwards] flex flex-col max-h-[90vh]",onClick:e=>e.stopPropagation(),children:[(0,x.jsxs)("div",{className:"flex justify-between items-center p-6 border-b border-slate-700",children:[(0,x.jsx)("h1",{id:"quick-tips-title",className:"text-3xl md:text-4xl font-bold text-sky-400 drop-shadow-md",children:"Quick Social Interaction Tips"}),(0,x.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-200 p-1 rounded-full hover:bg-slate-700 transition-colors","aria-label":"Close Quick Tips",children:(0,x.jsx)(E,{})})]}),(0,x.jsx)("div",{className:"overflow-y-auto px-6 pb-2 space-y-5 flex-grow",children:ex.map((e,t)=>(0,x.jsxs)("section",{className:"p-4 bg-slate-700/70 rounded-lg shadow",children:[(0,x.jsx)("h2",{className:"text-xl font-semibold text-teal-300 mb-1.5",children:e.title}),(0,x.jsx)("p",{className:"text-gray-300 text-sm",children:e.description})]},t))}),(0,x.jsx)("div",{className:"flex justify-center p-6 border-t border-slate-700",children:(0,x.jsx)("button",{onClick:t,className:"px-8 py-3 bg-sky-600 hover:bg-sky-500 text-white font-semibold rounded-lg text-lg shadow-md  transition-all duration-200 ease-in-out transform hover:scale-105 focus:outline-none  focus:ring-4 focus:ring-sky-400 focus:ring-opacity-50 flex items-center justify-center space-x-2","aria-label":"Close Quick Tips",children:(0,x.jsx)("span",{children:"Close"})})})]})})},ef=e=>{let{isOpen:t,onConfirm:a,onCancel:n}=e;return t?(p.useEffect(()=>{let e=e=>{"Escape"===e.key&&n()};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[n]),(0,x.jsx)("div",{className:"fixed inset-0 bg-slate-900/85 flex items-center justify-center z-[150] p-4 animate-[fadeIn_0.2s_ease-out]",role:"alertdialog","aria-modal":"true","aria-labelledby":"confirm-dialog-title","aria-describedby":"confirm-dialog-description",onClick:n,children:(0,x.jsxs)("div",{className:"bg-slate-800 p-6 md:p-8 rounded-xl shadow-2xl w-full max-w-md space-y-6 transform animate-[fadeInSlideUp_0.3s_ease-out_forwards]",onClick:e=>e.stopPropagation(),children:[(0,x.jsxs)("div",{className:"flex justify-between items-center",children:[(0,x.jsx)("h2",{id:"confirm-dialog-title",className:"text-2xl font-bold text-sky-400",children:"End Interaction?"}),(0,x.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-200 p-1 rounded-full hover:bg-slate-700 transition-colors","aria-label":"Cancel and continue interaction",children:(0,x.jsx)(E,{})})]}),(0,x.jsx)("p",{id:"confirm-dialog-description",className:"text-gray-300",children:"Are you sure you want to end the current interaction and return to the home screen? Your progress in this session will be lost."}),(0,x.jsxs)("div",{className:"flex justify-end space-x-4 pt-2",children:[(0,x.jsx)("button",{onClick:n,className:"px-6 py-2 bg-slate-600 hover:bg-slate-500 text-white font-semibold rounded-lg shadow-md transition-all duration-150 ease-in-out hover:scale-105 focus:outline-none  focus:ring-2 focus:ring-slate-400 focus:ring-opacity-75",children:"No, Continue"}),(0,x.jsx)("button",{onClick:a,className:"px-6 py-2 bg-red-600 hover:bg-red-500 text-white font-semibold rounded-lg shadow-md transition-all duration-150 ease-in-out hover:scale-105 focus:outline-none  focus:ring-2 focus:ring-red-400 focus:ring-opacity-75",children:"Yes, End"})]})]})})):null};var ey=a(1426);let eb=(e,t)=>{if(e&&"object"==typeof e&&e.error&&"object"==typeof e.error){let a=e.error,n=a.message||t;return 429===a.code||"RESOURCE_EXHAUSTED"===a.status?n="API quota exceeded (Error ".concat(a.code||"429",": ").concat(a.status||"RESOURCE_EXHAUSTED","). Please check your Google Cloud project plan and billing details. For more information, visit https://ai.google.dev/gemini-api/docs/rate-limits. Original message: ").concat(a.message||"No specific message."):a.message&&(n="API Error ".concat(a.code||"Unknown Code"," (").concat(a.status||"Unknown Status","): ").concat(a.message)),n}return e instanceof Error?e.message:t},ev=e=>{if(!e||e===g.NOT_SPECIFIED)return"Not specified. Assume a general adult age unless context implies otherwise. Adapt naturally.";switch(e){case g.TEENAGER:return"Teenager (e.g., around 13-17 years old). Your vocabulary, concerns, and social understanding should reflect this age group.";case g.YOUNG_ADULT:return"Young Adult (e.g., around 18-29 years old). Your experiences and perspectives should align with this life stage.";case g.ADULT:return"Adult (e.g., around 30-55 years old). Portray maturity and life experiences typical of this age range.";case g.SENIOR:return"Senior (e.g., 55+ years old). Your demeanor, references, and pace might reflect this age group.";default:return"Not specified. Assume a general adult age."}},ew=e=>{if(!e||e===g.NOT_SPECIFIED)return"adult";switch(e){case g.TEENAGER:return"teenage";case g.YOUNG_ADULT:return"young adult";case g.ADULT:return"adult";case g.SENIOR:return"senior citizen, elderly, mature looking";default:return"adult"}};class ej{parseJsonFromText(e){let t=e.trim(),a=RegExp("^```(\\w*)?\\s*\\n?(.*?)\\n?\\s*```$","s"),n=t.match(a);n&&n[2]&&(t=n[2].trim());try{return JSON.parse(t)}catch(a){return console.error("Failed to parse JSON response:",a,"Attempted to parse:",t,"Original text from API:",e),null}}cleanAiDialogue(e){if("string"!=typeof e)return e||"";let t=e.replace(/\\n/g,"\n");return(t=t.replace(/\s*\[.*?\]\s*|\s*<.*?>\s*/g," ")).replace(/\s+/g," ").trim()}async startConversation(e){let t=e.customContext?"\n    - Custom Scenario Details: ".concat(e.customContext):"",a="\n    - AI Age Bracket: ".concat(ev(e.aiAgeBracket)),n="You are an AI simulating a social interaction for training purposes.\n    Your AI Name: ".concat(e.aiName,"\n    Your AI Persona Details:\n    - Environment: ").concat(e.environment,"\n    - AI Personality: ").concat(e.aiPersonality,"\n    - AI Gender: ").concat(e.aiGender).concat(a,"\n    - Power Dynamic with User: ").concat(e.powerDynamic).concat(t,"\n\n    As ").concat(e.aiName,", start the conversation with an engaging opening line. This line must be consistent with your persona, name, gender, age bracket (if specified), and all provided scenario details.\n    IMPORTANT: For this first message, your language MUST BE VERY CASUAL AND SIMPLE, universally approachable. Avoid jargon, complex idioms, or overly formal sentences. Aim for simple, direct speech as if talking to a new acquaintance in a relaxed setting.\n    Describe your initial body language, appropriate for your persona, and the scenario. This 'initialBodyLanguage' field is mandatory.\n    Provide your initial internal thoughts about this upcoming interaction (e.g., your expectations, how you feel about the scenario, initial assessment of the user if applicable). This should be a brief, candid first-person internal monologue reflecting your persona and age. This 'initialAiThoughts' field is a absolutely mandatory part of your response.\n    Set an initial engagement level for the user (a number between 0 and 100, let's start with ").concat(70,"). This 'initialEngagementScore' field is mandatory.\n    Set an initial conversation momentum score (0-100, start with a neutral 55). This 'initialConversationMomentum' field is mandatory.\n\n    Respond ONLY in a single, valid JSON object. Do not include any text, comments, or markdown fences outside of this JSON object.\n    Ensure all string values are correctly quoted. Special characters within strings (e.g., double quotes, backslashes, newlines) must be properly escaped (e.g., `\\\"`, `\\\\`, `\\\\n`).\n    The JSON object must have the following structure:\n    {\n      \"initialDialogue\": \"Your opening line as ").concat(e.aiName,' here.",\n      "initialBodyLanguage": "Description of your body language.",\n      "initialAiThoughts": "Your initial internal monologue about the interaction as ').concat(e.aiName,'.",\n      "initialEngagementScore": ').concat(70,',\n      "initialConversationMomentum": 55\n    }');try{var s;let t=await this.ai.models.generateContent({model:Q,contents:[{role:"user",parts:[{text:n}]}],config:{responseMimeType:"application/json"}}),a=this.parseJsonFromText(null!==(s=t.text)&&void 0!==s?s:" ");if(a&&"string"==typeof a.initialDialogue&&"string"==typeof a.initialBodyLanguage&&"string"==typeof a.initialAiThoughts&&"number"==typeof a.initialEngagementScore&&"number"==typeof a.initialConversationMomentum)return a.initialDialogue=this.cleanAiDialogue(a.initialDialogue),a.initialBodyLanguage=this.cleanAiDialogue(a.initialBodyLanguage),a.initialAiThoughts=this.cleanAiDialogue(a.initialAiThoughts),a;return console.error("Failed to parse initial conversation data from Gemini, using defaults.",t.text),{initialDialogue:"Hello! I'm ".concat(e.aiName,". Let's talk."),initialBodyLanguage:"Neutral and open.",initialAiThoughts:"I'm ready to see how this interaction goes. I hope the user is engaging.",initialEngagementScore:70,initialConversationMomentum:55}}catch(t){let e=eb(t,"Failed to initialize conversation with AI.");throw console.error("Error starting conversation with Gemini:",e,t),Error(e)}}async generateImagePromptForBodyLanguage(e,t,a,n,s){let i,o="person";switch(t){case m.MALE:o="man";break;case m.FEMALE:o="woman";break;case m.NON_BINARY:o="non-binary person";break;case m.PREFER_NOT_TO_SPECIFY:o="person with an androgynous appearance"}let r=ew(n),l=this.cleanAiDialogue(e),c="Ensure no text, letters, words, logos, or watermarks appear in the generated image.",d=null;if(s)i=s;else{let e="Photorealistic portrait of a ".concat(r," ").concat(o," who embodies the character ").concat(a,", wearing simple neutral-colored attire (like a dark gray t-shirt or simple blue sweater). The background is simple and neutral, slightly out of focus, with soft natural lighting. The shot is typically chest-up. ").concat(c);i=e,d=this.cleanAiDialogue(e)}let u=i.replace(c,"").replace(/\.\s*$/,"").trim(),g="".concat(u,", who is currently ").concat(l,". ").concat(c);return{fullImagenPrompt:this.cleanAiDialogue(g),newEstablishedVisualSegment:d}}async getNextAITurn(e,t,a,n){let s=n.customContext?"\n    - Custom Scenario Details: ".concat(n.customContext):"",i="\n    - AI Age Bracket: ".concat(ev(n.aiAgeBracket)),o=e.slice(-10).map(e=>{let t="user"===e.sender?"User":n.aiName,a="".concat(t,': "').concat(e.text,'"');return"ai"===e.sender&&e.bodyLanguageDescription&&(a+=" (Body Language: ".concat(e.bodyLanguageDescription,")")),a}).join("\n"),r="You are ".concat(n.aiName,", an AI in a social interaction simulation.\n    Your Persona:\n    - Environment: ").concat(n.environment,"\n    - AI Personality: ").concat(n.aiPersonality,"\n    - AI Gender: ").concat(n.aiGender).concat(i,"\n    - Power Dynamic with User: ").concat(n.powerDynamic).concat(s,"\n\n    Current Conversation Context:\n    - User's Current Engagement Score with you: ").concat(a,"% (0-100 scale). This reflects how interested and positive the user feels towards you. Your response should naturally reflect this. If engagement is very low (e.g., < 20), you might sound disengaged or try to end the conversation. If high (e.g., > 80), you'd be more enthusiastic.\n    - Recent Conversation History (last ").concat(10," turns):\n    ").concat(o,"\n    - User's latest message to you: \"").concat(t,"\"\n\n    Your Task:\n    Based on your persona (including specified age bracket), the current engagement, the conversation history, and the user's latest message:\n    1.  Craft your next spoken dialogue as ").concat(n.aiName,' ("aiDialogue"). This should be natural, in character, and react appropriately to the user and engagement level. Avoid overly long responses.\n    2.  Describe your current body language and facial expression ("aiBodyLanguage"). This should align with your dialogue and emotional state.\n    3.  Provide your internal thoughts as ').concat(n.aiName,' ("aiThoughts"). This is your candid, private reaction to the user\'s message and your plan for your response. These thoughts influence your dialogue and body language and should reflect your age.\n    4.  Calculate a new engagement score ("newEngagement") from your perspective of how the user\'s last message affected your engagement with them. This score (0-100) should realistically change based on the user\'s input. For example, a positive, engaging message might increase it, a rude one decrease it.\n    5.  Assess the current "conversationMomentum" (0-100). This reflects the energy and flow. Is it picking up, stalling, or negative?\n    6.  Decide if you want to end the conversation ("isEndingConversation": true/false). You might end it if engagement is critically low, a natural conclusion is reached, or your persona dictates it.\n\n    Response Format:\n    Respond ONLY in a single, valid JSON object. No extra text or markdown. Ensure correct JSON syntax, especially for strings and escaping.\n    Example JSON structure:\n    {\n      "aiDialogue": "Your response here...",\n      "aiBodyLanguage": "Your body language description...",\n      "aiThoughts": "Your internal thoughts here...",\n      "newEngagement": 75,\n      "conversationMomentum": 60,\n      "isEndingConversation": false\n    }\n    Focus on natural, human-like interaction. Your response length for aiDialogue should typically be 1-3 sentences.');try{var l;let e=await this.ai.models.generateContent({model:Q,contents:[{role:"user",parts:[{text:r}]}],config:{responseMimeType:"application/json"}}),t=this.parseJsonFromText(null!==(l=e.text)&&void 0!==l?l:"");if(t&&"string"==typeof t.aiDialogue&&"string"==typeof t.aiBodyLanguage&&"string"==typeof t.aiThoughts&&"number"==typeof t.newEngagement&&"number"==typeof t.conversationMomentum&&"boolean"==typeof t.isEndingConversation)return t.aiDialogue=this.cleanAiDialogue(t.aiDialogue),t.aiBodyLanguage=this.cleanAiDialogue(t.aiBodyLanguage),t.aiThoughts=this.cleanAiDialogue(t.aiThoughts),t;return console.error("Failed to parse AI turn data from Gemini, using fallback.",e.text),{aiDialogue:"I'm not sure how to respond to that. Could you try rephrasing?",aiBodyLanguage:"Looks a bit confused.",aiThoughts:"The AI response was not in the expected format. Need to debug the prompt or parsing.",newEngagement:Math.max(0,a-10),conversationMomentum:30,isEndingConversation:!1}}catch(t){let e=eb(t,"Failed to get next AI turn.");throw console.error("Error in getNextAITurn:",e,t),Error(e)}}async analyzeConversation(e,t,a){let n=e.slice(-30).map(e=>{let a="";return"user"===e.sender?a+='User: "'.concat(e.text,'"\n'):(a+="".concat(t.aiName,': "').concat(e.text,'"\n'),e.bodyLanguageDescription&&(a+="AI Body Language: ".concat(e.bodyLanguageDescription,"\n")),e.aiThoughts&&(a+="AI Internal Thoughts: ".concat(e.aiThoughts,"\n")),"number"==typeof e.conversationMomentum&&(a+="Conversation Momentum (AI perceived): ".concat(e.conversationMomentum,"%\n"))),a.trim()}).join("\n\n---\n\n"),s=t.customContext?"\n    - Custom Scenario Details: ".concat(t.customContext):"",i=t.aiAgeBracket&&t.aiAgeBracket!==g.NOT_SPECIFIED?"\n    - AI Age Bracket: ".concat(t.aiAgeBracket):"",o="You are a sophisticated AI Social Skills Coach. Your task is to analyze the following conversation and provide a detailed performance report.\n\n    Scenario Context:\n    - Social Environment: ".concat(t.environment,"\n    - AI Interlocutor Name: ").concat(t.aiName,"\n    - AI Interlocutor Personality: ").concat(t.aiPersonality,"\n    - AI Interlocutor Gender: ").concat(t.aiGender).concat(i,"\n    - Power Dynamic: ").concat(t.powerDynamic).concat(s,"\n    - The AI's final engagement score with the user was: ").concat(a,"%\n\n    Full Conversation History (or relevant excerpt):\n    ").concat(n,'\n\n    Analysis Task:\n    Based on the scenario (including AI\'s age bracket if specified) and the conversation history, generate a comprehensive analysis report.\n    The report MUST be a single, valid JSON object with the following structure and data types:\n    {\n      "overallCharismaScore": number, // (0-100) User\'s overall charisma and likability.\n      "responseClarityScore": number, // (0-100) Clarity and coherence of the user\'s responses.\n      "engagementMaintenanceScore": number, // (0-100) User\'s ability to keep the AI engaged.\n      "adaptabilityScore": number, // (0-100) User\'s skill in adapting to the AI\'s persona (including age) and conversation flow.\n      "overallAiEffectivenessScore": number, // (0-100, optional) Your assessment of how well the AI played its role based on its persona and the interaction. If unsure, you can omit or use a placeholder like 75.\n      "finalEngagementSnapshot": ').concat(a,', // User\'s final engagement score with the AI.\n      "turnByTurnAnalysis": [ \n        {\n          "userInput": "User\'s message in that turn (if any).",\n          "aiResponse": "AI\'s response in that turn (if any).",\n          "aiBodyLanguage": "AI\'s body language at that turn (if any).",\n          "aiThoughts": "AI\'s internal thoughts at that turn (if any, from history).",\n          "userTurnEffectivenessScore": number, // (0-100) How effective was the user\'s specific input in this turn?\n          "conversationMomentum": number, // (0-100) The AI\'s perceived conversation momentum from that AI turn (from history, if available).\n          "analysis": "Your concise analysis of this specific exchange (user\'s part, AI\'s part, dynamics)."\n        }\n      ],\n      "overallFeedback": "Detailed overall feedback for the user. Include specific strengths, areas for improvement, and actionable tips. Be constructive and encouraging. Consider how user adapted to AI\'s age if specified.",\n      "aiEvolvingThoughtsSummary": "A brief summary of how the AI\'s internal thoughts (from \'AI Internal Thoughts\' in history) seemed to evolve or react to the user throughout the conversation. If not enough data, state that."\n    }\n\n    Guidelines for Analysis:\n    - Be objective and fair.\n    - Provide specific examples from the conversation to support your scores and feedback.\n    - For turn-by-turn analysis, focus on key moments or turns that significantly impacted the interaction. You don\'t need to analyze every single message if some are trivial. Try to get 3-7 key turns.\n    - Ensure all numerical scores are within the 0-100 range.\n    - The "aiEvolvingThoughtsSummary" should be based *only* on the AI\'s thoughts provided in the history.\n    - The "conversationMomentum" in turnByTurnAnalysis should be taken from the AI\'s message data if present for that turn.\n\n    Respond ONLY with the single, valid JSON object. No explanations or text outside the JSON structure.\n    All string values within the JSON must be properly quoted and escaped.\n    ');try{var r;let e=await this.ai.models.generateContent({model:Q,contents:[{role:"user",parts:[{text:o}]}],config:{responseMimeType:"application/json"}}),t=this.parseJsonFromText(null!==(r=e.text)&&void 0!==r?r:"");if(t&&"number"==typeof t.overallCharismaScore&&"number"==typeof t.responseClarityScore&&"number"==typeof t.engagementMaintenanceScore&&"number"==typeof t.adaptabilityScore&&"number"==typeof t.finalEngagementSnapshot&&Array.isArray(t.turnByTurnAnalysis)&&"string"==typeof t.overallFeedback)return t.turnByTurnAnalysis=t.turnByTurnAnalysis.map(e=>({...e,userInput:this.cleanAiDialogue(e.userInput),aiResponse:this.cleanAiDialogue(e.aiResponse),aiBodyLanguage:this.cleanAiDialogue(e.aiBodyLanguage),aiThoughts:this.cleanAiDialogue(e.aiThoughts),analysis:this.cleanAiDialogue(e.analysis),userTurnEffectivenessScore:"number"==typeof e.userTurnEffectivenessScore?e.userTurnEffectivenessScore:void 0,conversationMomentum:"number"==typeof e.conversationMomentum?e.conversationMomentum:void 0})),t.overallFeedback=this.cleanAiDialogue(t.overallFeedback),t.aiEvolvingThoughtsSummary&&(t.aiEvolvingThoughtsSummary=this.cleanAiDialogue(t.aiEvolvingThoughtsSummary)),t;throw console.error("Failed to parse analysis report from Gemini, or structure is invalid.",e.text,t),Error("Failed to generate a valid analysis report. The AI's response was not in the expected format.")}catch(t){let e=eb(t,"Failed to analyze conversation.");throw console.error("Error analyzing conversation with Gemini:",e,t),Error(e)}}constructor(e){this.ai=new ey.fA({apiKey:e})}}class eN{async generateImage(e){try{var t,a,n;let s=await this.ai.models.generateImages({model:"imagen-3.0-generate-002",prompt:e,config:{numberOfImages:1,outputMimeType:"image/jpeg"}});if(null===(n=s.generatedImages)||void 0===n?void 0:null===(a=n[0])||void 0===a?void 0:null===(t=a.image)||void 0===t?void 0:t.imageBytes)return s.generatedImages[0].image.imageBytes;throw console.error("Imagen response did not contain image data:",s),Error("No image data received from Imagen.")}catch(t){console.error("Error generating image with ImagenService:",t);let e=t instanceof Error?t.message:String(t);throw Error("Failed to generate image: ".concat(e))}}constructor(e){this.ai=new ey.fA({apiKey:e})}}let ek=e=>{let{onLogoClick:t,onToggleQuickTips:a}=e;return(0,x.jsx)("header",{className:"bg-slate-800 shadow-md",children:(0,x.jsxs)("div",{className:"container mx-auto px-4 py-3 flex justify-between items-center",children:[(0,x.jsx)("div",{onClick:t,role:"button",tabIndex:0,"aria-label":"SosheIQ Logo - Go to Homepage",className:"cursor-pointer",children:(0,x.jsx)(B,{className:"h-10 w-auto"})}),(0,x.jsxs)("button",{onClick:a,className:"text-sky-300 hover:text-sky-100 font-medium py-2 px-3 rounded-md text-sm bg-slate-700 hover:bg-slate-600 transition-colors duration-150 flex items-center space-x-1.5","aria-label":"View Quick Tips",children:[(0,x.jsx)(S,{}),(0,x.jsx)("span",{children:"Quick Tips"})]})]})})},eA=()=>(0,x.jsx)("footer",{className:"bg-slate-800 border-t border-slate-700 mt-auto",children:(0,x.jsx)("div",{className:"container mx-auto px-4 py-4 text-center",children:(0,x.jsx)("p",{className:"text-sm text-gray-500",children:"SosheIQ - Sharpen Your Social Skills. Powered by Gemini & Imagen."})})});var eI=()=>{let[e,t]=(0,p.useState)(h.HERO),[a,n]=(0,p.useState)(null),[s,i]=(0,p.useState)([]),[o,r]=(0,p.useState)(70),[l,c]=(0,p.useState)(0),[d,u]=(0,p.useState)(!1),[m,g]=(0,p.useState)(!1),[f,v]=(0,p.useState)(null),[w,j]=(0,p.useState)(null),[N,k]=(0,p.useState)(null),A=(0,p.useRef)(null),I=(0,p.useRef)(null),[S,E]=(0,p.useState)(!1),[T,C]=(0,p.useState)(!1),[L,D]=(0,p.useState)(!1),[_,M]=(0,p.useState)(!1);(0,p.useEffect)(()=>{let e="AIzaSyDEDR-ZDmRKbMebFyYLeDJ76KIYwpqiFvc";if(!e){v("API key is missing. Please set NEXT_PUBLIC_API_KEY environment variable."),u(!1);return}A.current=new ej(e),I.current=new eN(e)},[]);let O=(0,p.useCallback)(e=>{v(null),e===h.HERO&&(n(null),i([]),r(70),c(0),j(null),k(null),M(!1)),t(e)},[]),B=(0,p.useCallback)(async e=>{if(!A.current||!I.current){v("Services not initialized.");return}u(!0),v(null),n(e),i([]),r(70),c(0),j(null),k(null);try{let{initialDialogue:a,initialBodyLanguage:s,initialAiThoughts:o,initialEngagementScore:l,initialConversationMomentum:c}=await A.current.startConversation(e),d={id:(0,b.Z)(),sender:"ai",text:a,bodyLanguageDescription:s,aiThoughts:o,timestamp:new Date,conversationMomentum:c};i([d]),r(l);let{fullImagenPrompt:u,newEstablishedVisualSegment:m}=await A.current.generateImagePromptForBodyLanguage(s,e.aiGender,e.aiName,e.aiAgeBracket,e.aiEstablishedVisualPromptSegment);m&&e&&n(e=>e?{...e,aiEstablishedVisualPromptSegment:m}:null),d.imagePrompt=u;let g=await I.current.generateImage(u);k(g),d.imageUrl=g,i(e=>e.map(e=>e.id===d.id?{...d,imageUrl:g}:e)),t(h.INTERACTION)}catch(e){console.error("Error starting interaction:",e),v("Failed to start interaction: ".concat(e.message))}finally{u(!1)}},[]),F=(0,p.useCallback)(async e=>{if(!A.current||!I.current||!a)return;let t={id:(0,b.Z)(),sender:"user",text:e,timestamp:new Date},d={id:(0,b.Z)(),sender:"ai",text:"",timestamp:new Date(t.timestamp.getTime()+1),isThinkingBubble:!0};i(e=>[...e,t,d]),g(!0),v(null);try{let d=s.filter(e=>!e.isThinkingBubble),u=await A.current.getNextAITurn([...d,t],e,o,a),m={id:(0,b.Z)(),sender:"ai",text:u.aiDialogue,bodyLanguageDescription:u.aiBodyLanguage,aiThoughts:u.aiThoughts,timestamp:new Date,conversationMomentum:u.conversationMomentum};i(e=>[...e.filter(e=>!e.isThinkingBubble),m]);let g=u.newEngagement;if(g-=1,g=Math.max(0,Math.min(100,g)),r(g),g<=0?c(e=>e+1):c(0),u.aiBodyLanguage&&a){let{fullImagenPrompt:e,newEstablishedVisualSegment:t}=await A.current.generateImagePromptForBodyLanguage(u.aiBodyLanguage,a.aiGender,a.aiName,a.aiAgeBracket,a.aiEstablishedVisualPromptSegment);t&&n(e=>e?{...e,aiEstablishedVisualPromptSegment:t}:null),m.imagePrompt=e;let s=await I.current.generateImage(e);k(s),m.imageUrl=s,i(e=>e.map(e=>e.id===m.id?{...m,imageUrl:s}:e))}let h=g<=0?l+1:0;(u.isEndingConversation||g>=100||g<=0&&h>=3)&&U(!0)}catch(t){console.error("Error sending message or getting AI response:",t),v("Communication error: ".concat(t.message));let e={id:(0,b.Z)(),sender:"ai",text:"I'm having trouble responding right now. Please try again in a moment or end the conversation.",bodyLanguageDescription:"Looks concerned.",timestamp:new Date};i(t=>[...t.filter(e=>!e.isThinkingBubble),e])}finally{g(!1)}},[a,s,o,l]),U=(0,p.useCallback)(async function(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0],!A.current||!a){v("Cannot end conversation: service or scenario details missing."),t(h.HERO);return}D(!1),u(!0),v(null);let e=s.filter(e=>!e.isThinkingBubble);i(e),t(h.ANALYSIS);try{let t=await A.current.analyzeConversation(e,a,o);j(t)}catch(e){console.error("Error generating analysis report:",e),v("Failed to generate analysis: ".concat(e.message)),j(null)}finally{u(!1)}},[s,a,o]),Y=(0,p.useCallback)(()=>{t(h.SETUP),n(null),i([]),r(70),c(0),j(null),v(null),k(null),M(!1)},[]),H=()=>E(e=>!e),G=()=>C(e=>!e),z=()=>{o>=100||o<=0&&l>=3?U(!0):U(!1)};return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(y(),{children:[(0,x.jsx)("title",{children:"SosheIQ - AI Social Interaction Trainer"}),(0,x.jsx)("meta",{name:"description",content:"Practice and improve your social skills with an AI-powered conversation partner. Get detailed feedback and analysis."}),(0,x.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,x.jsx)("link",{rel:"icon",href:"/logo.svg"})]}),(0,x.jsxs)("div",{className:"flex flex-col min-h-screen bg-slate-900 text-gray-100",children:[(0,x.jsx)(ek,{onLogoClick:()=>{e===h.INTERACTION?D(!0):O(h.HERO)},onToggleQuickTips:G}),(0,x.jsx)("main",{className:"flex-grow flex flex-col items-center p-4 md:p-6 animate-[fadeIn_0.3s_ease-out_forwards] ".concat(e===h.HERO?"justify-center":""),children:(()=>{if(f&&(e===h.SETUP||e===h.HERO||!A.current))return(0,x.jsxs)("div",{className:"w-full max-w-xl p-6 bg-red-800/20 border border-red-700 text-red-300 rounded-lg shadow-xl text-center",children:[(0,x.jsx)("h2",{className:"text-2xl font-bold mb-3",children:"An Error Occurred"}),(0,x.jsx)("p",{className:"mb-4",children:f}),(0,x.jsx)("button",{onClick:()=>O(h.HERO),className:"bg-sky-600 hover:bg-sky-500 text-white font-bold py-2 px-4 rounded-lg",children:"Back to Home"})]});if(d&&(e===h.SETUP||e===h.INTERACTION&&!a||e===h.ANALYSIS&&!w&&!f))return(0,x.jsx)(ei,{message:e===h.ANALYSIS?"Generating analysis...":"Loading..."});switch(e){case h.HERO:return(0,x.jsx)(R,{onNavigate:O});case h.INSTRUCTIONS:return(0,x.jsx)(P,{onNavigate:O});case h.SETUP:return(0,x.jsx)(W,{onStart:B});case h.INTERACTION:if(!a)return(0,x.jsx)(ei,{message:"Loading scenario..."});return(0,x.jsx)(es,{scenarioDetails:a,conversationHistory:s,currentEngagement:o,onSendMessage:F,onEndConversation:z,aiImageBase64:N,isLoadingAI:m,onToggleHelpOverlay:H,onToggleQuickTipsOverlay:G,showGlobalAiThoughts:_,onToggleGlobalAiThoughts:()=>M(e=>!e)});case h.ANALYSIS:if(!a)return(0,x.jsx)(ei,{message:"Loading scenario for analysis..."});return(0,x.jsx)(eu,{report:w,isLoadingReport:d&&!w&&!f,errorReport:f,onRestart:Y,scenarioDetails:a});default:return(0,x.jsx)(R,{onNavigate:O})}})()}),(0,x.jsx)(eA,{}),S&&(0,x.jsx)(eh,{onClose:H}),T&&(0,x.jsx)(ep,{onClose:G}),L&&(0,x.jsx)(ef,{isOpen:L,onConfirm:()=>{O(h.HERO),D(!1)},onCancel:()=>D(!1)})]})]})}}},function(e){e.O(0,[279,847,443,190,888,774,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);